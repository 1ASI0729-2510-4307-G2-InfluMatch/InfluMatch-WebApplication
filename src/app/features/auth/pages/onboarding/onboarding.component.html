<div class="onboarding-container">
  <div class="onboarding-card">
    <!-- Header -->
    <div class="card-header">
      <h1>¡Completa tu perfil!</h1>
      <p class="white" *ngIf="authData.role === 'INFLUENCER'">
        Para que las marcas puedan encontrarte, cuéntanos sobre ti.
      </p>
      <p *ngIf="authData.role === 'BRAND'">
        Para encontrar los influencers adecuados, cuéntanos sobre tu marca.
      </p>
      <div class="logo">
        <img src="assets/images/logo-light.png" alt="InfluMatch" />
      </div>
    </div>

    <!-- Progress Steps -->
    <div class="steps-progress">
      <div class="step-item" [ngClass]="{ completed: currentStep > 1 }">
        <div
          class="step-circle"
          [ngClass]="{ active: currentStep === 1, completed: currentStep > 1 }"
        >
          <ng-container *ngIf="currentStep <= 1">1</ng-container>
          <span *ngIf="currentStep > 1">✓</span>
        </div>
        <div
          class="step-label"
          [ngClass]="{ active: currentStep === 1, completed: currentStep > 1 }"
        >
          Información básica
        </div>
      </div>
      <div class="step-item" [ngClass]="{ completed: currentStep > 2 }">
        <div
          class="step-circle"
          [ngClass]="{ active: currentStep === 2, completed: currentStep > 2 }"
        >
          <ng-container *ngIf="currentStep <= 2">2</ng-container>
          <span *ngIf="currentStep > 2">✓</span>
        </div>
        <div
          class="step-label"
          [ngClass]="{ active: currentStep === 2, completed: currentStep > 2 }"
        >
          {{ authData.role === 'INFLUENCER' ? 'Redes sociales' : 'Detalles adicionales' }}
        </div>
      </div>
    </div>

    <!-- Form -->
    <form [formGroup]="form" (ngSubmit)="submit()">
      <!-- Step 1: Basic Info -->
      <div class="step-content" *ngIf="currentStep === 1">
        <ng-container *ngIf="authData.role === 'INFLUENCER'">
          <div class="form-group">
            <label for="displayName">Nombre para mostrar</label>
            <input
              type="text"
              id="displayName"
              formControlName="displayName"
              placeholder="Tu nombre o alias"
            />
          </div>
          <div class="form-group">
            <label for="bio">Biografía</label>
            <textarea
              id="bio"
              formControlName="bio"
              placeholder="Cuéntanos sobre ti"
            ></textarea>
          </div>
          <div class="form-group">
            <label for="category">Categoría</label>
            <select id="category" formControlName="category">
              <option value="">Selecciona una categoría</option>
              <option value="LIFESTYLE">Lifestyle</option>
              <option value="FASHION">Moda</option>
              <option value="BEAUTY">Belleza</option>
              <option value="FOOD">Gastronomía</option>
              <option value="TRAVEL">Viajes</option>
              <option value="FITNESS">Fitness</option>
              <option value="TECH">Tecnología</option>
              <option value="GAMING">Gaming</option>
              <option value="OTHER">Otro</option>
            </select>
          </div>
          <div class="form-group">
            <label for="country">País</label>
            <input
              type="text"
              id="country"
              formControlName="country"
              placeholder="Tu país"
            />
          </div>
          <div class="form-group">
            <label for="followersCount">Número de seguidores</label>
            <input
              type="number"
              id="followersCount"
              formControlName="followersCount"
              placeholder="Total de seguidores"
            />
          </div>
        </ng-container>

        <ng-container *ngIf="authData.role === 'BRAND'">
          <div class="form-group">
            <label for="companyName">Nombre de la empresa</label>
            <input
              type="text"
              id="companyName"
              formControlName="companyName"
              placeholder="Nombre de tu empresa"
            />
          </div>
          <div class="form-group">
            <label for="description">Descripción</label>
            <textarea
              id="description"
              formControlName="description"
              placeholder="Describe tu empresa"
            ></textarea>
          </div>
          <div class="form-group">
            <label for="industry">Industria</label>
            <input
              type="text"
              id="industry"
              formControlName="industry"
              placeholder="Tu industria"
            />
          </div>
          <div class="form-group">
            <label for="websiteUrl">Sitio web</label>
            <input
              type="url"
              id="websiteUrl"
              formControlName="websiteUrl"
              placeholder="https://tu-sitio.com"
            />
          </div>
          <div class="form-group">
            <label for="logoUrl">URL del logo</label>
            <input
              type="url"
              id="logoUrl"
              formControlName="logoUrl"
              placeholder="https://tu-sitio.com/logo.png"
            />
          </div>
        </ng-container>
      </div>

      <!-- Step 2: Social Links & Media (Influencer) or Additional Details (Brand) -->
      <div class="step-content" *ngIf="currentStep === 2">
        <ng-container *ngIf="authData.role === 'INFLUENCER'">
          <!-- Social Links -->
          <div formArrayName="socialLinks" class="social-links">
            <h3>Redes Sociales</h3>
            <div *ngFor="let link of socialLinks.controls; let i = index" [formGroupName]="i" class="social-link-item">
              <div class="form-group">
                <label [for]="'platform-' + i">Plataforma</label>
                <select [id]="'platform-' + i" formControlName="platform">
                  <option value="IG">Instagram</option>
                  <option value="YT">YouTube</option>
                  <option value="TT">TikTok</option>
                  <option value="FB">Facebook</option>
                  <option value="TW">Twitter</option>
                  <option value="LN">LinkedIn</option>
                  <option value="OTHER">Otra</option>
                </select>
              </div>
              <div class="form-group">
                <label [for]="'url-' + i">URL</label>
                <input [id]="'url-' + i" type="url" formControlName="url" placeholder="https://..." />
              </div>
              <button type="button" (click)="removeSocialLink(i)" *ngIf="i > 0">Eliminar</button>
            </div>
            <button type="button" (click)="addSocialLink()">Agregar red social</button>
          </div>

          <!-- Media Assets -->
          <div formArrayName="mediaAssets" class="media-assets">
            <h3>Contenido multimedia</h3>
            <div *ngFor="let asset of mediaAssets.controls; let i = index" [formGroupName]="i" class="media-asset-item">
              <div class="form-group">
                <label [for]="'mediaType-' + i">Tipo</label>
                <select [id]="'mediaType-' + i" formControlName="mediaType">
                  <option value="IMAGE">Imagen</option>
                  <option value="VIDEO">Video</option>
                  <option value="DOC">Documento</option>
                </select>
              </div>
              <div class="form-group">
                <label [for]="'mediaUrl-' + i">URL</label>
                <input [id]="'mediaUrl-' + i" type="url" formControlName="url" placeholder="https://..." />
              </div>
              <div class="form-group">
                <label [for]="'mediaTitle-' + i">Título</label>
                <input [id]="'mediaTitle-' + i" type="text" formControlName="title" placeholder="Título del contenido" />
              </div>
              <div class="form-group">
                <label [for]="'mediaDesc-' + i">Descripción</label>
                <textarea [id]="'mediaDesc-' + i" formControlName="description" placeholder="Descripción del contenido"></textarea>
              </div>
              <button type="button" (click)="removeMediaAsset(i)" *ngIf="i > 0">Eliminar</button>
            </div>
            <button type="button" (click)="addMediaAsset()">Agregar contenido</button>
          </div>
        </ng-container>

        <ng-container *ngIf="authData.role === 'BRAND'">
          <!-- Additional brand details here if needed -->
        </ng-container>
      </div>

      <!-- Navigation Buttons -->
      <div class="form-actions">
        <button type="button" (click)="prevStep()" *ngIf="currentStep > 1">
          Anterior
        </button>
        <button
          type="button"
          (click)="nextStep()"
          *ngIf="currentStep < 2"
          [disabled]="form.invalid"
        >
          Siguiente
        </button>
        <button
          type="submit"
          *ngIf="currentStep === 2"
          [disabled]="form.invalid"
        >
          Finalizar
        </button>
      </div>
    </form>
  </div>
</div>
